'use strict';var apiDisabled=!1,clearChildren=function(){for(var a=document.querySelectorAll('input[type="checkbox"].category'),b=0;b<a.length;b++)a[b].addEventListener('change',function(){if(this.checked);else for(var c=document.querySelectorAll('#'+this.id+' ~ ul input.service'),d=0;d<c.length;d++)c[d].checked=!1})},selectParent=function(){for(var a=document.querySelectorAll('input[type="checkbox"].service'),b=0;b<a.length;b++)a[b].addEventListener('change',function(){this.checked&&(this.parentElement.parentElement.parentElement.querySelector('input.category').checked=!0)})};function tokenizeURLArgs(a){var b={},c=a.replace('/','').replace('?','').replace('%20',' ');return c.split('&').map(function(d){var e=d.split('=');''!==e[0]&&(b[e[0]]=e[1])}),b}document.addEventListener('DOMContentLoaded',function(){var a=document.getElementById('intro'),b=document.getElementById('update-form'),c=tokenizeURLArgs(window.location.search);if(!c.site)return a.innerHTML='<div class="error">\n <h1>No sites found</h1>\n <p>You need to use the URL provided by your RMS.</p>\n </div>\n ',!1;var d='https://api.heartland.com/services/v1/'+c.site+'/?verification=on',e='https://api.heartland.com/services/v1/'+c.site+'/update/',f={checkbox:'<svg class="icon icon-uncheck"><use xlink:href="#icon-check_box_outline_blank"></use></svg><svg class="icon icon-check"><use xlink:href="#icon-check_box"></use></svg>'};fetch(d).then(function(g){return g.json()}).then(function(g){if(!1==g.error){a.innerHTML='<img\n src="https://res.cloudinary.com/heartland-dental/image/upload/c_scale,e_colorize:100,co_rgb:ffffff,h_120/v1/logos/'+g.practice_info.content_url+'.png"\n alt="'+g.practice_info.name+' logo"\n width="300"\n class="logo"\n />\n <div class="message">\n <h1>Verify Practice Services for '+g.practice_info.name+'</h1>\n <p>Please look over '+g.practice_info.name+' and use this page to notify us of any changes to the services offered. Changes made here will appear by the next day, if not sooner. If a service is selected here but is still not shown on your site, then you may request content to be created or modified.</p>\n </div>\n ';var h={};Object.keys(g.services).sort().forEach(function(l){h[l]=g.services[l]}),b.innerHTML='<input type="hidden" name="practice_id" value="'+g.practice_info.practice_id+'" />\n <input type="hidden" name="content_url" value="'+g.practice_info.content_url+'" />\n <ul class="categories">\n\n '+Object.keys(h).map(function(l){return'<li>\n <input\n type="checkbox"\n '+(g.provided_parents[l]?'checked':'')+'\n name="services"\n class="category"\n value="'+g.parent_ids[l]+'" id="id_'+g.parent_ids[l]+'"\n />\n <label for="id_'+g.parent_ids[l]+'">\n '+f.checkbox+' '+g.parents[l]+'\n </label>\n\n '+(1<g.services[l].length?'\n <p>Please select all that apply</p>\n <ul class="services">\n '+g.services[l].map(function(m){return m.is_parent?'':'\n <li>\n <input\n type="checkbox"\n '+(m.is_provided?'checked':'')+'\n name="services"\n class="service"\n id="id_'+m.id+'"\n value="'+m.id+'"\n />\n <label for="id_'+m.id+'" title="'+m.tooltip+'">\n '+f.checkbox+' '+m.name+'\n </label>\n </li>'}).join('\n')+'</ul>':'\n <p>No additional content options in the '+g.parents[l]+' category.</p>\n ')+'\n\n </li>'}).join('\n')+'\n\n </ul>\n <label for="authcode">Please enter the authorization code found in your email.</label>\n <input type="text" name="authcode" class="authcode" value="'+(c.auth?c.auth:'')+'" />\n <input id="submit-button" type="submit" value="Submit">',clearChildren(),selectParent()}else a.innerHTML='<div class="error">\n <h1>Error: '+g.message+'</h1>\n <p>Double check the link you recieved. If it&rsquo;s incorrect, contact the Digital Marketing team.</p>\n </div>\n '}).then(function(){var g=function(){var l=document.querySelector('div.form .response');l&&l.parentNode.removeChild(l),fetch(e,{method:'post',body:new FormData(h)}).then(function(m){return m.json()}).then(function(m){a.removeChild(document.querySelector('.message'));var n=document.createElement('div');n.classList.add('response'),console.log('error?',m),m.error?(n.classList.add('error'),n.innerHTML='<p>'+m.message+'</p>'):(n.classList.add('success'),n.innerHTML='<p>'+m.message+'</p>\n <p>Please allow 24-48 for your changes to be made live on your site. If you still don\'t see the changes, please contact the web team.</p>'),h.innerHTML='',h.appendChild(n);var o=Math.floor(10*Math.random())+1,p=document.createElement('div');p.classList.add('success-img'),p.innerHTML='<img src="/assets/images/success'+o+'.gif" />',h.insertBefore(p,n)})},h=document.getElementById('update-form');h.addEventListener('submit',function(l){l.preventDefault(),g()})}).catch(function(){a.innerHTML='<div class="error">\n <h1>Unable to connect to API resource</h1>\n <p>Try again later or contact the Digital Marketing team.</p>\n </div>\n '})});